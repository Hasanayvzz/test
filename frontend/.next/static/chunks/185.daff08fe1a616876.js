"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5185:function(e,t,l){l.r(t),l.d(t,{default:function(){return j}});var o=l(5893),i=l(7294),a=l(8787),n=l(2143),r=l(7274),s=l(7030),d=l(629),g=l(7906),c=l(295),h=l(3252),m=l(2882),u=l(3184),f=l(9305),b=l(3816),p=l(1163),x=l(2507),S=l(1444);var y=e=>{let{rows:t,columns:l,filters:a,setActivePage:y,setDetailItem:j,pagination:v,trigger:B,setTrigger:D,blogTrigger:C,setBlogTrigger:k,headFontSize:N,isBorderRadius:w}=e;const[F,W]=i.useState(0),[L,Z]=i.useState(5),[P,R]=i.useState(!1),[O,U]=i.useState(""),[H,z]=i.useState(""),[A,I]=i.useState(""),[E,T]=i.useState(""),{handleLoading:_}=i.useContext(x.O),{t:$}=(0,n.$)(),K=(0,s.F)();console.log("table filtre",a);let M=t;const q=(0,p.useRouter)();return(0,o.jsxs)(d.Z,{sx:{width:"100%",overflow:"hidden",boxShadow:"none",borderRadius:4,padding:"0.5rem",background:"light"===K.theme?"#FBFBFB":"#333333"},children:[(0,o.jsx)(m.Z,{className:"pointer",sx:{borderRadius:w||0},children:(0,o.jsxs)(g.Z,{stickyHeader:!0,"aria-label":"sticky table",className:"px-3 py-2 ",children:[(0,o.jsx)(u.Z,{style:{backgroundColor:"light"===K.theme?"#F0F0F0":"#1F1F1F"},children:(0,o.jsx)(b.Z,{style:{borderRadius:99},children:null===l||void 0===l?void 0:l.map(((e,t)=>(0,o.jsx)(h.Z,{align:e.align,style:{minWidth:e.minWidth,color:"light"===K.theme?"#7B809A":"#f9f9f9",background:"transparent",fontSize:N||18,fontWeight:500,borderBottom:t!==l.length||"light"!==K.theme?"1px solid #D8D8D8":"1px solid #D7D7D7"},children:e.label},e.id)))})}),(0,o.jsx)(c.Z,{style:{backgroundColor:"light"===K.theme?"#fbfbfb":"#333333"},children:null===M||void 0===M?void 0:M.slice(F*L,F*L+L).map(((e,t)=>(console.log("rowlar ne",e),(0,o.jsx)(b.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:null===l||void 0===l?void 0:l.map((t=>{const l=e[t.id];return"detailBtn"===t.id?(0,o.jsx)(h.Z,{onClick:()=>{j(e),y("detail")},style:{color:"#E91F63",fontSize:18,lineHeight:"21.78px",fontWeight:500},align:t.align,children:t.format&&"number"===typeof l?t.format(l):l},t.id):"delete"===t.id?(0,o.jsx)(h.Z,{onClick:()=>{r.xm.deleteUser({userId:e.id}).then((e=>{D(!B),S.Am.success("Kullan\u0131c\u0131 ba\u015far\u0131yla silindi.",{position:"top-right",hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light",autoClose:3e3})})),console.log("row ne",e)},style:{color:"#f7626f",fontSize:18,lineHeight:"21.78px",fontWeight:500},align:t.align,children:t.format&&"number"===typeof l?t.format(l):l},t.id):"deleteBlog"===t.id?(0,o.jsx)(h.Z,{onClick:()=>{r.xm.deleteBlog({blogId:e.id}).then((e=>{k(!C),S.Am.success("Blog ba\u015far\u0131yla silindi.",{position:"top-right",hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light",autoClose:3e3})}))},style:{color:"#f7626f",fontSize:18,lineHeight:"21.78px",fontWeight:500},align:t.align,children:t.format&&"number"===typeof l?t.format(l):l},t.id):"status"===t.id?(0,o.jsx)(h.Z,{onClick:()=>{console.log("row ne",e)},style:{color:"#00D66B",fontSize:18,lineHeight:"21.78px",fontWeight:500},align:t.align,children:(0,o.jsx)("div",{children:"Rejected"===l?(0,o.jsx)("p",{style:{color:"#f7626f"},children:"Reddedildi"}):(0,o.jsx)("div",{className:"d-flex align-items-center gap-2",children:"waitingApproval"===l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{r.xm.updateBlog({blogId:e.id,status:"Approved"}).then((e=>{k(!C),S.Am.success("Blog Ba\u015far\u0131yla Onayland\u0131!",{position:"top-right",hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light",autoClose:3e3})}))},className:"btn-rounded-green",children:"Onayla"}),(0,o.jsx)("button",{onClick:()=>{r.xm.updateBlog({blogId:e.id,status:"Rejected"}).then((e=>{k(!C),S.Am.success("Blog Ba\u015far\u0131yla Reddedildi!",{position:"top-right",hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light",autoClose:3e3})}))},className:"btn-rounded-red",children:"Reddet"})]}):(0,o.jsx)("p",{children:"Onayland\u0131"})})})},t.id):"blogDetail"===t.id?(0,o.jsx)(h.Z,{onClick:()=>{q.push("blogs/".concat(e.id))},style:{color:"#f9b34d",fontSize:18,lineHeight:"21.78px",fontWeight:500},align:t.align,children:t.format&&"number"===typeof l?t.format(l):l},t.id):(0,o.jsx)(h.Z,{style:{color:"light"===K.theme?"#344767":"#f6f6f6",fontSize:16,lineHeight:"21.78px",fontWeight:400,borderBottom:"light"===K.theme?"1px solid #D8D8D8":"1px solid #D7D7D7"},align:t.align,children:t.format&&"number"===typeof l?t.format(l):l},t.id)}))},e.code))))})]})}),v&&(0,o.jsx)(f.Z,{style:{color:"light"===K.theme?"#344767":"#f9f9f9"},rowsPerPageOptions:[10,25,100],count:t.length,rowsPerPage:L,labelRowsPerPage:$("dashboard.rowsPer"),page:F,component:"div",onPageChange:(e,t)=>{W(t)},onRowsPerPageChange:e=>{Z(+e.target.value),W(0)}})]})};var j=()=>{const[e,t]=(0,i.useState)([]),[l,d]=(0,i.useState)([]),{t:g}=(0,n.$)(),[c,h]=(0,i.useState)(!1),[m,u]=(0,i.useState)(!1),f=(0,s.F)(),b=[{id:"id",label:g("table.userId"),minWidth:150,align:"left",format:e=>e.toLocaleString("en-US")},{id:"name",label:g("table.userName"),minWidth:150,align:"left",format:e=>e.toLocaleString("en-US")},{id:"email",label:"E-Mail",minWidth:150,align:"left",format:e=>e.toLocaleString("en-US")},{id:"userRole",label:g("table.role"),minWidth:150,align:"left",format:e=>e.toLocaleString("en-US")},{id:"registrationDate",label:g("table.registrationDate"),align:"left",format:e=>e.toLocaleString("en-US")},{id:"delete",align:"left",format:e=>e.toFixed(2)}],p=[{id:"id",label:g("table.userId"),minWidth:150,align:"left",format:e=>e.toLocaleString("en-US")},{id:"blogName",label:g("table.blogName"),minWidth:150,align:"left",format:e=>e.toLocaleString("en-US")},{id:"date",label:g("table.publishedDate"),minWidth:150,align:"left",format:e=>e.toLocaleString("en-US")},{id:"authorName",label:g("table.authorName"),minWidth:150,align:"left",format:e=>e.toLocaleString("en-US")},{id:"country",label:g("table.country"),align:"left",format:e=>e.toLocaleString("en-US")},{id:"blogDetail",align:"left",format:e=>e.toFixed(2)},{id:"deleteBlog",align:"left",format:e=>e.toFixed(2)},{id:"status",align:"left",label:g("table.status"),format:e=>e.toFixed(2)}],{handleLoading:S}=(0,i.useContext)(x.O);return(0,i.useEffect)((()=>{S(!0),r.xm.getAllUsers().then((e=>{let l=[];e.users.map((e=>{const t={id:e._id,registrationDate:new Date(e.date).toLocaleDateString(),email:e.email,name:e.fullName,userRole:e.userRole,delete:g("table.deleteUser")};l.push(t),S(!1)})),t(l)})).catch((e=>{console.log(e),S(!1)}))}),[c]),(0,i.useEffect)((()=>{r.xm.getAllBlogWithoutImages().then((e=>{console.log("blog res",e);let t=[];e.blogs.map((e=>{const l={id:e._id,blogName:e.blogName,date:new Date(e.date).toLocaleDateString(),authorName:e.authorName,country:e.country,status:e.status,blogDetail:"Detay",deleteBlog:"Sil"};t.push(l)})),d(t)}))}),[m]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z,{}),(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("p",{className:"".concat(f.theme," text-32-700 mt-4 mb-3"),children:g("navbar.dashboard")}),(0,o.jsx)("p",{className:"".concat(f.theme," text-24-700-yellow mt-4 mb-3"),children:g("userList")}),(0,o.jsx)(y,{trigger:c,setTrigger:h,pagination:!0,rows:e,headFontSize:12,columns:b}),(0,o.jsx)("p",{className:"".concat(f.theme," text-24-700-yellow mt-4 mb-3"),children:g("blogList")}),(0,o.jsx)(y,{pagination:!0,rows:l,blogTrigger:m,setBlogTrigger:u,headFontSize:12,columns:p}),(0,o.jsx)("div",{className:"pb-5"})]})]})}}}]);